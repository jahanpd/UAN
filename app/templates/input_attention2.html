{% extends "base.html" %}


{% block content %}
<div class="container">
  <div class="row justify-content-md-center">
    <h2>Uncertainty-aware Attention Network Input</h2>
  </div>
  <div class="row justify-content-md-center">
      <div>
        Please enter data for as many variables as possible. For unknown variables select either unknown, or enter -1.
      </div> <br> <br>
  </div>
  <div class="row justify-content-md-center">
        <p class="btn" data-toggle="collapse" href="#collapseTable" role="button" aria-expanded="false" aria-controls="collapseTable">Learn more about this model</p><br>
        <div class="collapse" id="collapseTable">
            <p>The UAN is a special type of neural network which utilizes an 'attention function' at its core. This makes the model flexible to the number of input variables
              and innately interpretable as we can visualize the attention paid to each input variable as a heat map. It has been designed in a Bayesian framework giving the
              user feedback as to model uncertainty with credible intervals on the probability prediction.
        </div>
</div>
  </div>
<div class="container">
  <div class="row justify-content-md-center">
  
    <div class="col-8">
      <form action="" method="POST">
        {{ form.csrf_token }}
        <table class="table"> 
          <h2>Demographics</h2>
          {% for field in form %}
            {% if data_dict[field.id] == "demographic" %}
              <tr>
                <td>{{ field.label }}</td>
                {% if patient is not none %}
                  <td>{{ field(value=patient[field.id]) }}</td>
                {% else %}
                  <td>{{ field }}</td>
                {% endif %}
              </tr>
            {% endif %}
            {% for error in field.errors %}
                  <span style="color: red;">[{{field.label}} {{ error }}]</span><br>
            {% endfor %}
          {% endfor %}
        </table>
        <table class="table">
          <h2>History</h2>
            {% for field in form %}
            {% if data_dict[field.id] == "history" %}
                <tr>
                  <td>{{ field.label }}</td>
                  {% if patient is not none %}
                    <td>{{ field(value=patient[field.id]) }}</td>
                  {% else %}
                    <td>{{ field }}</td>
                  {% endif %}
                </tr>
              {% endif %}
              {% for error in field.errors %}
                    <span style="color: red;">[{{field.label}} {{ error }}]</span><br>
              {% endfor %}
            {% endfor %}
        </table>
        <table class="table">
          <h2>Physiology</h2>
            {% for field in form %}
            {% if data_dict[field.id] == "physiology" %}
                <tr>
                  <td>{{ field.label }}</td>
                  {% if patient is not none %}
                    <td>{{ field(value=patient[field.id]) }}</td>
                  {% else %}
                    <td>{{ field }}</td>
                  {% endif %}
                </tr>
              {% endif %}
              {% for error in field.errors %}
                    <span style="color: red;">[{{field.label}} {{ error }}]</span><br>
              {% endfor %}
            {% endfor %}
        </table>
        <table class="table">
          <h2>Operative Characteristics</h2>
            {% for field in form %}
            {% if data_dict[field.id] == "operative" %}
                <tr>
                  <td>{{ field.label }}</td>
                  {% if patient is not none %}
                    <td>{{ field(value=patient[field.id]) }}</td>
                  {% else %}
                    <td>{{ field }}</td>
                  {% endif %}
                </tr>
              {% endif %}
              {% for error in field.errors %}
                    <span style="color: red;">[{{field.label}} {{ error }}]</span><br>
              {% endfor %}
            {% endfor %}
        </table>
        <table class="table">
          <h2>Laboratory Values</h2>
            {% for field in form %}
            {% if data_dict[field.id] == "labs" %}
                <tr>
                  <td>{{ field.label }}</td>
                  {% if patient is not none %}
                    <td>{{ field(value=patient[field.id]) }}</td>
                  {% else %}
                    <td>{{ field }}</td>
                  {% endif %}
                </tr>
              {% endif %}
              {% for error in field.errors %}
                    <span style="color: red;">[{{field.label}} {{ error }}]</span><br>
              {% endfor %}
            {% endfor %}
        </table>
        <table class="table">
          <h2>Early Postoperative Variables</h2>
            {% for field in form %}
            {% if data_dict[field.id] == "postoperative" %}
                <tr>
                  <td>{{ field.label }}</td>
                  {% if patient is not none %}
                    <td>{{ field(value=patient[field.id]) }}</td>
                  {% else %}
                    <td>{{ field }}</td>
                  {% endif %}
                </tr>
              {% endif %}
              {% for error in field.errors %}
                    <span style="color: red;">[{{field.label}} {{ error }}]</span><br>
              {% endfor %}
            {% endfor %}
        </table>
        <p>{{ form.submit() }}</p>
      </form>
    </div>

  </div>
</div>


{% endblock %}


{% block start_javascript %}

{% endblock %}